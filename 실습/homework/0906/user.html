<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script>
      async function onChangeTableData() {
        const url = "https://jsonplaceholder.typicode.com/users";
        let table = document.getElementById("table");
        const response = await fetch(url, {
          method: "GET",
        });

        if (response.ok) {
          let data = await response.json();
          let tbody = document.getElementById("tbody");
          let rowCount = tbody.rows.length;
          console.log(tbody.rows.length);

          let tableHeaderRowCount = 0;
          for (let i = tableHeaderRowCount; i < rowCount; i++) {
            tbody.deleteRow(tableHeaderRowCount);
          }

          data.map((value) => {
            console.log(value);

            const newRow = tbody.insertRow();

            const newCell1 = newRow.insertCell(0);
            const newCell2 = newRow.insertCell(1);
            const newCell3 = newRow.insertCell(2);
            const newCell4 = newRow.insertCell(3);

            //Cell 값 추가
            newCell1.innerText = value.id;
            newCell2.innerText = value.name;
            newCell3.innerText = value.phone;
            newCell4.innerText = value.website;
          });
        }
      }
    </script>
  </head>
  <body>
    <div
      style="
        width: 80%;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      "
    >
      <button class="btn btn-primary" style="width: 100%" onclick="onChangeTableData()">
        사용자 정보 불러오기
      </button>
      <table id="table" class="table table-striped">
        <thead>
          <th>아이디</th>
          <th>이름</th>
          <th>전화번호</th>
          <th>홈페이지</th>
        </thead>
        <tbody id="tbody">
          <tr style="text-align: center">
            <td colspan="4">사용자 정보를 조회를 주세요!</td>
          </tr>
        </tbody>
      </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
